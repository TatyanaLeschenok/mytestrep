general:
  build_dir: MyApplication
  branches:
    only:
    - master
machine:
  environment:
    APP_VERSION_CODE: "11"
    APP_VERSION_NAME: "0.11.0"
dependencies:
  pre:
  - echo $ANDROID_HOME
  - echo $JAVA_HOME
  - mvn -version
  - node --version
  - npm install -g appium
  - appium &
  - which appium
  - pwd
  - node 'home/ubuntu/nvm/v0.10.33/bin/appium/bin/appium-doctor.js'
  - chmod +x gradlew
  - ./gradlew clean
  #- ./gradlew tasks --all
test:
  post:
  - ./gradlew jacocoTestReport
  - cp -r app/build/test-results/* $CIRCLE_TEST_REPORTS
  - cp -r app/build/reports/jacoco/jacocoTestReport/* $CIRCLE_ARTIFACTS 
deployment:
  master:
    branch: master
    commands:
      - ./deploy_master.sh
